<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.24.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1703147704290-8" author="miguoliang">
        <dropForeignKeyConstraint baseTableName="edge" constraintName="fk_edge_on_invertex"/>
    </changeSet>
    <changeSet id="1703147704290-9" author="miguoliang">
        <dropForeignKeyConstraint baseTableName="edge" constraintName="fk_edge_on_outvertex"/>
    </changeSet>
    <changeSet id="1703147704290-3" author="miguoliang">
        <addColumn tableName="edge">
            <column name="in_vertex_id" type="VARCHAR(255)"/>
            <column name="out_vertex_id" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet id="1703147704290-6" author="miguoliang">
        <addForeignKeyConstraint baseColumnNames="in_vertex_id" baseTableName="edge"
                                 constraintName="FK_EDGE_ON_IN_VERTEX" referencedColumnNames="id"
                                 referencedTableName="vertex"/>
    </changeSet>
    <changeSet id="1703147704290-7" author="miguoliang">
        <addForeignKeyConstraint baseColumnNames="out_vertex_id" baseTableName="edge"
                                 constraintName="FK_EDGE_ON_OUT_VERTEX" referencedColumnNames="id"
                                 referencedTableName="vertex"/>
    </changeSet>
    <changeSet id="1703147704290-10" author="miguoliang">
        <dropColumn columnName="invertex_id" tableName="edge"/>

        <dropColumn columnName="outvertex_id" tableName="edge"/>
    </changeSet>
    <changeSet id="1703147704290-2" author="miguoliang">
        <addPrimaryKey columnNames="in_vertex_id, out_vertex_id, name, scope" constraintName="pk_edge"
                       tableName="edge"/>
    </changeSet>

</databaseChangeLog>